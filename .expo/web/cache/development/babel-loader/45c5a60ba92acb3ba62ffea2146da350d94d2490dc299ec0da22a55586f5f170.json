{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BarCode(_ref) {\n  var onBarCodeScanned = _ref.onBarCodeScanned,\n    onCancel = _ref.onCancel;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    scanning = _useState4[0],\n    setScanning = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    scannedData = _useState6[0],\n    setScannedData = _useState6[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$BarCodeScanner = yield BarCodeScanner.requestPermissionsAsync(),\n        status = _yield$BarCodeScanner.status;\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref3) {\n    var type = _ref3.type,\n      data = _ref3.data;\n    setScanning(false);\n    setScannedData(data !== null);\n    onBarCodeScanned(data);\n  };\n  var handleCancel = function handleCancel() {\n    onCancel();\n  };\n  if (hasPermission === null) {\n    return _jsx(Text, {\n      children: \"Requesting for camera permission\"\n    });\n  }\n  if (hasPermission === false) {\n    return _jsx(Text, {\n      children: \"No access to camera\"\n    });\n  }\n  return _jsxs(View, {\n    style: {\n      flex: 1\n    },\n    children: [scanning ? _jsx(BarCodeScanner, {\n      onBarCodeScanned: handleBarCodeScanned,\n      style: StyleSheet.absoluteFillObject\n    }) : _jsx(View, {\n      children: scannedData.success ? _jsx(ProductDetails, {\n        data: scannedData.data\n      }) : _jsx(AddNewProduct, {\n        data: scannedData.data\n      })\n    }), _jsx(Button, {\n      title: \"Cancel\",\n      onPress: handleCancel\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","View","Text","Button","StyleSheet","BarCodeScanner","jsx","_jsx","jsxs","_jsxs","BarCode","_ref","onBarCodeScanned","onCancel","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","scanning","setScanning","_useState5","_useState6","scannedData","setScannedData","_asyncToGenerator","_yield$BarCodeScanner","requestPermissionsAsync","status","handleBarCodeScanned","_ref3","type","data","handleCancel","children","style","flex","absoluteFillObject","success","ProductDetails","AddNewProduct","title","onPress"],"sources":["/home/papi/projects/ispent_app/ispent/modules/inputs/Barcode.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, Text, Button, StyleSheet } from 'react-native';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\n\nexport default function BarCode({ onBarCodeScanned, onCancel }) {\n\n    const [hasPermission, setHasPermission] = useState(null);\n    const [scanning, setScanning] = useState(true);\n    const [scannedData, setScannedData] = useState(false);\n\n    useEffect(() => {\n        (async () => {\n            const { status } = await BarCodeScanner.requestPermissionsAsync();\n            setHasPermission(status === 'granted');\n        })();\n    }, []);\n\n    const handleBarCodeScanned = ({ type, data }) => {\n        setScanning(false);\n        setScannedData(data !== null);\n        onBarCodeScanned(data);\n    };\n\n    const handleCancel = () => {\n        onCancel();\n    }\n\n    if (hasPermission === null) {\n        return <Text>Requesting for camera permission</Text>;\n    }\n    if (hasPermission === false) {\n        return <Text>No access to camera</Text>;\n    }\n    return (\n        <View style={{ flex: 1 }}>\n            { scanning ? (\n                <BarCodeScanner\n                    onBarCodeScanned={handleBarCodeScanned}\n                    style={StyleSheet.absoluteFillObject}\n                />\n            ) : (\n                <View>\n                    {scannedData.success ? (\n                        <ProductDetails data={scannedData.data} />\n                    ) : (\n                        <AddNewProduct data={scannedData.data} />\n                    )}\n                </View>\n            )}\n            <Button title=\"Cancel\" onPress={handleCancel} />\n        </View>\n    );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,MAAA;AAAA,OAAAC,UAAA;AAEnD,SAASC,cAAc,QAAQ,sBAAsB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEtD,eAAe,SAASC,OAAOA,CAAAC,IAAA,EAAiC;EAAA,IAA9BC,gBAAgB,GAAAD,IAAA,CAAhBC,gBAAgB;IAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;EAExD,IAAAC,SAAA,GAA0Cf,QAAQ,CAAC,IAAI,CAAC;IAAAgB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjDG,aAAa,GAAAF,UAAA;IAAEG,gBAAgB,GAAAH,UAAA;EACtC,IAAAI,UAAA,GAAgCpB,QAAQ,CAAC,IAAI,CAAC;IAAAqB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAvCE,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAC5B,IAAAG,UAAA,GAAsCxB,QAAQ,CAAC,KAAK,CAAC;IAAAyB,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAA9CE,WAAW,GAAAD,UAAA;IAAEE,cAAc,GAAAF,UAAA;EAElCxB,SAAS,CAAC,YAAM;IACZ2B,iBAAA,CAAC,aAAY;MACT,IAAAC,qBAAA,SAAyBvB,cAAc,CAACwB,uBAAuB,EAAE;QAAzDC,MAAM,GAAAF,qBAAA,CAANE,MAAM;MACdZ,gBAAgB,CAACY,MAAM,KAAK,SAAS,CAAC;IAC1C,CAAC,GAAG;EACR,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAAC,KAAA,EAAuB;IAAA,IAAjBC,IAAI,GAAAD,KAAA,CAAJC,IAAI;MAAEC,IAAI,GAAAF,KAAA,CAAJE,IAAI;IACtCZ,WAAW,CAAC,KAAK,CAAC;IAClBI,cAAc,CAACQ,IAAI,KAAK,IAAI,CAAC;IAC7BtB,gBAAgB,CAACsB,IAAI,CAAC;EAC1B,CAAC;EAED,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAA,EAAS;IACvBtB,QAAQ,EAAE;EACd,CAAC;EAED,IAAII,aAAa,KAAK,IAAI,EAAE;IACxB,OAAOV,IAAA,CAACL,IAAI;MAAAkC,QAAA,EAAC;IAAgC,EAAO;EACxD;EACA,IAAInB,aAAa,KAAK,KAAK,EAAE;IACzB,OAAOV,IAAA,CAACL,IAAI;MAAAkC,QAAA,EAAC;IAAmB,EAAO;EAC3C;EACA,OACI3B,KAAA,CAACR,IAAI;IAACoC,KAAK,EAAE;MAAEC,IAAI,EAAE;IAAE,CAAE;IAAAF,QAAA,GACnBf,QAAQ,GACNd,IAAA,CAACF,cAAc;MACXO,gBAAgB,EAAEmB,oBAAqB;MACvCM,KAAK,EAAEjC,UAAU,CAACmC;IAAmB,EACvC,GAEFhC,IAAA,CAACN,IAAI;MAAAmC,QAAA,EACAX,WAAW,CAACe,OAAO,GAChBjC,IAAA,CAACkC,cAAc;QAACP,IAAI,EAAET,WAAW,CAACS;MAAK,EAAG,GAE1C3B,IAAA,CAACmC,aAAa;QAACR,IAAI,EAAET,WAAW,CAACS;MAAK;IACzC,EAER,EACD3B,IAAA,CAACJ,MAAM;MAACwC,KAAK,EAAC,QAAQ;MAACC,OAAO,EAAET;IAAa,EAAG;EAAA,EAC7C;AAEf"},"metadata":{},"sourceType":"module","externalDependencies":[]}